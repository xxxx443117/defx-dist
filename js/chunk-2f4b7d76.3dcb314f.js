(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f4b7d76"],{"0c1c":function(e,t,c){"use strict";c("1a59")},"1a59":function(e,t,c){},"1e3b":function(e,t,c){},"3a14":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAnCAYAAACMo1E1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNDk1MjNEN0MzNEExMUVCQjg2NzlGMEZBNDFBODNDMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBNDk1MjNEOEMzNEExMUVCQjg2NzlGMEZBNDFBODNDMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkE0OTUyM0Q1QzM0QTExRUJCODY3OUYwRkE0MUE4M0MwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkE0OTUyM0Q2QzM0QTExRUJCODY3OUYwRkE0MUE4M0MwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+FCTZXwAABm1JREFUeNq8WHtsFEUY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"},"5a71":function(e,t,c){"use strict";c("1e3b")},7610:function(e,t,c){e.exports=c.p+"img/lottery.4582f4a2.png"},"8b68":function(e,t,c){"use strict";c("9de0")},"9de0":function(e,t,c){},ae845:function(e,t,c){e.exports=c.p+"img/bg-1@2x.4c0bffac.png"},dc3a:function(e,t,c){"use strict";var n=c("7a23"),l=c("1975"),a=c.n(l),r=function(e){return Object(n["pushScopeId"])("data-v-c925910a"),e=e(),Object(n["popScopeId"])(),e},o={class:"popper-box"},s={class:"frame"},i={class:"flex jc-between ai-center"},d={class:"text"},b=Object(n["createTextVNode"])("Title"),u={class:"p-content"},j=r((function(){return Object(n["createElementVNode"])("footer",null,null,-1)}));function m(e,t,c,l,r,m){return r.p_value?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:Object(n["normalizeClass"])(["m-popper flex jc-center ai-center",r.lifeClass]),onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(){return m.hide&&m.hide.apply(m,arguments)}),["self"]))},[Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("header",i,[Object(n["createElementVNode"])("span",d,[Object(n["renderSlot"])(e.$slots,"title",{},(function(){return[b]}),!0)]),Object(n["createElementVNode"])("img",{class:"btn-close",src:a.a,onClick:t[0]||(t[0]=function(){return m.hide&&m.hide.apply(m,arguments)}),alt:""})]),Object(n["createElementVNode"])("div",u,[Object(n["renderSlot"])(e.$slots,"default",{},void 0,!0)]),j])])],2)):Object(n["createCommentVNode"])("",!0)}var O={name:"mPopper",props:{modelValue:{type:Boolean,require:!0}},emits:["update:modelValue"],data:function(){return{p_value:!1,lifeClass:"hide"}},watch:{modelValue:function(e){e?this.show():this.hide()}},methods:{setLifeClass:function(e){this.lifeClass=e?"show":"hide"},show:function(){var e=this;this.p_value=!0,this.$emit("update:modelValue",!0),setTimeout((function(){return e.setLifeClass(!0)}),20)},hide:function(){var e=this;this.setLifeClass(!1),setTimeout((function(){e.p_value=!1,e.$emit("update:modelValue",!1)}),300)}},mounted:function(){this.setLifeClass(this.modelValue)}},p=(c("8b68"),c("d959")),f=c.n(p);const g=f()(O,[["render",m],["__scopeId","data-v-c925910a"]]);t["a"]=g},e849:function(e,t,c){"use strict";c.r(t);c("99af");var n=c("7a23"),l=c("3a14"),a=c.n(l),r=c("e719"),o=c.n(r),s=c("7610"),i=c.n(s),d=function(e){return Object(n["pushScopeId"])("data-v-15bfdf0b"),e=e(),Object(n["popScopeId"])(),e},b={class:"nft-lottery page flex flex-column container-full"},u={class:"down flex1 flex"},j={class:"nft-game box b1 flex flex-column p-25"},m={class:"tt flex jc-between ai-center"},O={class:"text fs-20"},p={class:"card-list flex jc-between"},f={class:"card flex jc-center ai-center shadow-active"},g=["src"],h={class:"no-lv flex jc-between ai-center"},E=d((function(){return Object(n["createElementVNode"])("div",{class:"card flex jc-center ai-center shadow-active"},[Object(n["createElementVNode"])("span",{class:"hdr-text-blue fs-16"},"NFT")],-1)})),N=d((function(){return Object(n["createElementVNode"])("p",{class:"no-lv flex jc-between ai-center"},null,-1)})),v={class:"flex"},V={class:"context flex1 flex ai-center"},k={class:"flex jc-between ai-center text"},y=d((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),w={class:"fs-20"},B={class:"ta-right"},x=d((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),S={class:"fs-20"},D={class:"pool flex ai-center"},A=["src"],C=d((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),L={class:"fs-20"},I={class:"select-box ta-center"},M={class:"wrap"},F=["onClick"],R=["src"],z={class:"c-info text animate-inout"},T={class:"lv"},G={class:"no"},Y=d((function(){return Object(n["createElementVNode"])("img",{class:"icon",src:a.a,alt:""},null,-1)})),Z={key:0,class:"mask flex jc-center ai-center"},J=d((function(){return Object(n["createElementVNode"])("span",{class:"icon-loading"},null,-1)})),U=[J],W={class:"tips flex jc-between"},Q={class:"ta-left"},X={class:"ta-right"},_={class:"box b2 flex1 flex flex-column p-25"},H={class:"tt flex jc-between ai-center"},K={class:"text fs-20"},P={class:"epoch bg-radius flex ai-center"},q={class:"text flex1"},$={class:"fs-25 no"},ee=d((function(){return Object(n["createElementVNode"])("img",{class:"icon",src:o.a,alt:""},null,-1)})),te=["onClick"],ce={class:"fs-16"},ne={class:"flex jc-between p-25"},le={class:"flex1 flex ai-center"},ae={class:"record-list flex ai-center flex-wrap",style:{width:"100%"}},re=["onClick"],oe={key:0,class:"ta-center"},se={class:"text fs-18"},ie={key:1,class:"flex ai-center"},de=["src"],be={key:0},ue=d((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),je={class:"fs-20"},me={key:1},Oe=d((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),pe={class:"fs-20"},fe={class:"btn-tip text absolute"},ge={key:1,class:"nft-item bg-radius flex jc-center ai-center"},he=d((function(){return Object(n["createElementVNode"])("b",{class:"text fs-18"},"#——",-1)})),Ee=[he],Ne={key:1,class:"flex1 flex jc-center ai-center"},ve={class:"ta-center",style:{"padding-bottom":"30px"}},Ve=d((function(){return Object(n["createElementVNode"])("img",{src:i.a,alt:"",style:{width:"140px"}},null,-1)})),ke={class:"fs-16 text"};function ye(e,t,c,l,a,r){var o=Object(n["resolveComponent"])("lottery-reward"),s=Object(n["resolveComponent"])("m-button"),i=Object(n["resolveComponent"])("m-popper");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",b,[Object(n["createVNode"])(o,{class:"up"}),Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("div",m,[Object(n["createElementVNode"])("span",O,Object(n["toDisplayString"])(e.language.tt_4_1),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(a.isApproved?e.language.tip_1_2:e.language.tip_1_1),1)]),Object(n["createElementVNode"])("ul",p,[(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(5,(function(e){return Object(n["createElementVNode"])("li",{class:"text",key:e},[a.gameCards[e-1]?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("img",{class:"card-img",src:a.gameCards[e-1].resUrl,alt:""},null,8,g)]),Object(n["createElementVNode"])("p",h,[Object(n["createElementVNode"])("span",null,"#"+Object(n["toDisplayString"])(a.gameCards[e-1].tokenId||a.gameCards[e-1].id),1),Object(n["createElementVNode"])("span",null,"Lv."+Object(n["toDisplayString"])(a.gameCards[e-1].grade),1)])],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[E,N],64))])})),64))]),Object(n["createElementVNode"])("div",v,[a.isApproved?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0,class:"btn hdr-el-blue",onClick:t[0]||(t[0]=function(e){a.selectedIds=[],a.showSelection=!0,r.getCardList()})},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.language.btn_add_card),1)]})),_:1})):(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:1,class:"btn auth hdr-el-blue",loading:a.authLoading,onClick:t[1]||(t[1]=function(e){return r.setApproved()})},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.language.btn_authorize),1)]})),_:1},8,["loading"]))]),Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("ul",k,[Object(n["createElementVNode"])("li",null,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.language.lottery_no),1),y,Object(n["createElementVNode"])("b",w,"NO. "+Object(n["toDisplayString"])(e.market.epoch),1)]),Object(n["createElementVNode"])("li",B,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.language.end_clock),1),x,Object(n["createElementVNode"])("b",S,Object(n["toDisplayString"])(r.countDisplay),1)]),Object(n["createElementVNode"])("li",D,[Object(n["createElementVNode"])("img",{src:a.coinMap.DFT,alt:"DFT",class:"icon-m"},null,8,A),Object(n["createElementVNode"])("p",null,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.language.tt_4_3),1),C,Object(n["createElementVNode"])("b",L,Object(n["toDisplayString"])(e.market.rewardAmount||"——"),1)])])])]),Object(n["createVNode"])(i,{modelValue:a.showSelection,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.showSelection=e})},{title:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.language.tt_4_2),1)]})),default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",I,[Object(n["createElementVNode"])("ul",M,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.myCards,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:Object(n["normalizeClass"])(["select-item flex",{active:-1!==a.selectedIds.indexOf(e.id)}]),onClick:function(t){return r.selectCard(e.id)},key:e.id},[Object(n["createElementVNode"])("img",{class:"card-img",src:e.resUrl,alt:""},null,8,R),Object(n["createElementVNode"])("div",z,[Object(n["createElementVNode"])("b",T,"Lv."+Object(n["toDisplayString"])(e.grade),1),Object(n["createElementVNode"])("b",G,"#"+Object(n["toDisplayString"])(e.id),1)]),Y],10,F)})),128)),a.bagLoading?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",Z,U)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("p",W,[Object(n["createElementVNode"])("span",Q,"* "+Object(n["toDisplayString"])(e.language.tip_1_4),1),Object(n["createElementVNode"])("span",X,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.language.tip_1_5),1),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(5-a.gameCards.length-a.selectedIds.length),1)])]),Object(n["createVNode"])(s,{class:"hdr-el-blue",onClick:t[2]||(t[2]=function(e){return r.betNFT()}),loading:a.betLoading},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.language.btn_put_card),1)]})),_:1},8,["loading"])])]})),_:1},8,["modelValue"])]),Object(n["createElementVNode"])("div",_,[Object(n["createElementVNode"])("div",H,[Object(n["createElementVNode"])("span",K,Object(n["toDisplayString"])(e.language.lottery_record),1)]),a.betRecords.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createElementVNode"])("div",P,[Object(n["createElementVNode"])("div",q,[Object(n["createElementVNode"])("div",{class:"no-selector flex ai-center relative p-25",onClick:t[4]||(t[4]=function(e){return a.showList=!a.showList})},[Object(n["createElementVNode"])("b",$,"NO. "+Object(n["toDisplayString"])(a.currentLottery.epoch||"——"),1),ee,Object(n["createElementVNode"])("ul",{class:Object(n["normalizeClass"])(["select-list absolute shadow-active",{active:a.showList}])},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(a.betRecords,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:Object(n["normalizeClass"])(["flex jc-between p-25",{active:a.currentLottery.epoch===e.epoch}]),onClick:function(t){return r.onSelect(e)},key:e.epoch},[Object(n["createElementVNode"])("b",ce,"NO. "+Object(n["toDisplayString"])(e.epoch),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(r.dateFormatter(e.startAt)),1)],10,te)})),128))],2)]),Object(n["createElementVNode"])("p",ne,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(r.dateFormatter(a.currentLottery.endAt)),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.language.round_ended),1)])])]),Object(n["createElementVNode"])("div",le,[Object(n["createElementVNode"])("ul",ae,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(r.currentRecords,(function(t){var c,l;return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:t.id},[t.id?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:Object(n["normalizeClass"])(["nft-item bg-radius flex jc-center ai-center relative","reward-".concat(t.rewardLevel+1," ").concat(!t.claimed&&t.rewardLevel>=0?"unclaimed":"")]),onClick:function(e){return r.recordClaim(a.currentLottery,t)}},[t.rewardLevel<0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",oe,[Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.language.prize_0),1),Object(n["createElementVNode"])("b",se,"#"+Object(n["toDisplayString"])((null===(c=t.nft)||void 0===c?void 0:c.tokenId)||"——"),1)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ie,[Object(n["createElementVNode"])("img",{class:"icon-l",src:a.prizeMap[t.rewardLevel],alt:""},null,8,de),t.claimed?(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",be,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.language.order_claimed),1),ue,Object(n["createElementVNode"])("b",je,"#"+Object(n["toDisplayString"])((null===(l=t.nft)||void 0===l?void 0:l.tokenId)||"——"),1)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",me,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.language.reward)+"(DFT)",1),Oe,Object(n["createElementVNode"])("b",pe,Object(n["toDisplayString"])(r.amountFormatter(t.rewardAmount)),1),Object(n["createElementVNode"])("span",fe,Object(n["toDisplayString"])(e.language.order_unclaimed),1)]))]))],10,re)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ge,Ee))])})),128))])])],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ne,[Object(n["createElementVNode"])("div",ve,[Ve,Object(n["createElementVNode"])("p",ke,Object(n["toDisplayString"])(e.language.no_data),1)])]))])])])}var we=c("5530"),Be=(c("d81d"),c("a434"),c("7db0"),c("d3b7"),c("5710")),xe=c("dc3a"),Se=c("3228"),De=c("5502"),Ae=c("325c"),Ce=c("ae845"),Le=c.n(Ce),Ie=function(e){return Object(n["pushScopeId"])("data-v-e3c0fce2"),e=e(),Object(n["popScopeId"])(),e},Me={class:"lottery-reward flex"},Fe={class:"lottery relative"},Re=Ie((function(){return Object(n["createElementVNode"])("img",{class:"bg-1",src:Le.a,alt:""},null,-1)})),ze={class:"content text absolute"},Te={class:"no-row flex jc-between ai-center"},Ge={class:"fs-25"},Ye=Ie((function(){return Object(n["createElementVNode"])("img",{class:"icon",src:o.a,alt:""},null,-1)})),Ze=["onClick"],Je={class:"fs-16"},Ue={class:"pool"},We={class:"fs-25"},Qe={class:"reward-list flex1 flex"},Xe={class:"tt flex jc-between ai-center"},_e={class:"flex ai-center"},He=["src"],Ke={class:"fs-20"},Pe={class:"no bg-radius text ta-center"},qe={class:"flex jc-around fs-18"},$e={class:"reward flex jc-center ai-center"},et=["src"],tt=Ie((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),ct={class:"fs-20"};function nt(e,t,c,l,a,r){var o;return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Me,[Object(n["createElementVNode"])("div",Fe,[Re,Object(n["createElementVNode"])("div",ze,[Object(n["createElementVNode"])("div",{class:"epoch p-25",onClick:t[0]||(t[0]=function(e){return a.showList=!a.showList})},[Object(n["createElementVNode"])("div",Te,[Object(n["createElementVNode"])("b",Ge,"NO. "+Object(n["toDisplayString"])(a.currentLottery.epoch||"——"),1),Ye]),Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(r.dateFormatter(a.currentLottery.startAt)),1),Object(n["createElementVNode"])("ul",{class:Object(n["normalizeClass"])(["select-list absolute",{active:a.showList}])},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(a.epochRounds,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:Object(n["normalizeClass"])(["flex jc-between p-25",{active:a.currentLottery.epoch===e.epoch}]),onClick:function(t){return r.onSelect(e)},key:e.epoch},[Object(n["createElementVNode"])("b",Je,"NO. "+Object(n["toDisplayString"])(e.epoch),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(r.dateFormatter(e.startAt)),1)],10,Ze)})),128))],2)]),Object(n["createElementVNode"])("div",Ue,[Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.language.tt_4_3)+" (DFT)",1),Object(n["createElementVNode"])("b",We,Object(n["toDisplayString"])((null===(o=a.currentLottery)||void 0===o?void 0:o.rewardAmount)||"——"),1)])])]),Object(n["createElementVNode"])("ul",Qe,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(a.tips,(function(t,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:Object(n["normalizeClass"])(["item","reward-"+(t.level+1)]),key:c},[Object(n["createElementVNode"])("div",Xe,[Object(n["createElementVNode"])("div",_e,[Object(n["createElementVNode"])("img",{class:"icon-m",src:a.prizeMap[t.level],alt:""},null,8,He),Object(n["createElementVNode"])("b",Ke,Object(n["toDisplayString"])(r.levelFormatter(t.level)),1)]),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.language.label_1_2)+"："+Object(n["toDisplayString"])(t.num),1)]),Object(n["createElementVNode"])("div",Pe,[Object(n["createElementVNode"])("p",null,Object(n["toDisplayString"])(e.language.label_3_1),1),Object(n["createElementVNode"])("div",qe,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.level+1,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("b",{key:t.level+"_"+e},Object(n["toDisplayString"])(r.epochFormatter(t.nftIds[e-1])),1)})),128))])]),Object(n["createElementVNode"])("div",$e,[Object(n["createElementVNode"])("img",{src:a.coinMap.DFT,alt:"DFT",class:"icon-m d-b"},null,8,et),Object(n["createElementVNode"])("p",null,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.language.reward)+"(DFT)",1),tt,Object(n["createElementVNode"])("b",ct,Object(n["toDisplayString"])(t.rewardAmount),1)])])],2)})),128))])])}var lt=c("9895"),at=c("78ad"),rt={name:"lotteryReward",computed:Object(we["a"])(Object(we["a"])({},Object(De["d"])("nft",["market"])),Object(De["c"])(["language"])),data:function(){return{coinMap:lt["d"],prizeMap:lt["i"],showList:!1,epochRounds:[],currentLottery:{},tips:[{level:0,num:"—",rewardAmount:"——",nftIds:[]},{level:1,num:"—",rewardAmount:"——",nftIds:[]},{level:2,num:"—",rewardAmount:"——",nftIds:[]}],loading:!1}},methods:Object(we["a"])(Object(we["a"])({},Object(De["b"])("nft",["setMarket"])),{},{epochFormatter:function(e){return e?"#"+e:"——"},dateFormatter:function(e){return e?Object(at["f"])(e).format("yyyy-MM-dd"):"???-??-??"},getRoundList:function(){var e=this,t="query{\n        rounds(first: 20, orderBy: startBlock, orderDirection:desc) {\n          startAt\n          endAt\n          epoch\n          endBlock\n          rewardAmount\n          totalPoints\n        }\n      }";Object(Se["b"])(t).then((function(t){var c=t.rounds;e.setMarket(c[0]),c.splice(0,1),e.currentLottery=c[0],e.epochRounds=c,e.getRewardList(c[0].epoch)}))},getRewardList:function(e){var t=this,c='query{\n          winNumbers(where: {round: "'.concat(e,'"}) {\n            id\n            nftIds\n            rewardAmount\n            level\n          }\n        }');Object(Se["b"])(c).then((function(e){var c=e.winNumbers;t.tips=c.map((function(e){var t=e.rewardAmount,c=e.level,n=c+1;return t=new Ae["a"](t).div(n).myFixed(),Object(we["a"])(Object(we["a"])({},e),{},{rewardAmount:t,num:n})}))}))},levelFormatter:function(e){var t=["prize_1","prize_2","prize_3","prize_4","prize_5","prize_6"];return this.language[t[e]]},onSelect:function(e){this.currentLottery=e,this.getRewardList(e.epoch)}}),beforeMount:function(){this.getRoundList()}},ot=(c("5a71"),c("d959")),st=c.n(ot);const it=st()(rt,[["render",nt],["__scopeId","data-v-e3c0fce2"]]);var dt=it,bt={name:"nftLottery",components:{LotteryReward:dt,MPopper:xe["a"],MButton:Be["a"]},data:function(){return{showQuery:!1,showSelection:!1,selectedIds:[],isApproved:!1,gameCards:[],prizeMap:lt["i"],coinMap:lt["d"],showList:!1,betRecords:[],currentLottery:{records:[]},timer:null,count:0,authLoading:!1,bagLoading:!1,betLoading:!1,recordLoading:!1}},computed:Object(we["a"])(Object(we["a"])(Object(we["a"])(Object(we["a"])(Object(we["a"])({},Object(De["d"])("app",["address"])),Object(De["d"])("option",["currentBlock"])),Object(De["d"])("nft",["myCards","market"])),Object(De["c"])(["language"])),{},{currentRecords:function(){return this.currentLottery.records},countDisplay:function(){return Ae["c"].format(this.count)}}),watch:{address:function(){this.checkIsApproved(),this.getBetRecords()},market:function(){this.getBetRecords(),this.startClock()},currentBlock:function(){this.startClock()}},methods:Object(we["a"])(Object(we["a"])({},Object(De["b"])("nft",["deleteCard"])),{},{amountFormatter:function(e){return new Ae["a"](e).myFixed()},dateFormatter:function(e){return e?Object(at["f"])(e).format("yyyy-MM-dd"):"???-??-??"},startClock:function(){var e=this,t=this.market,c=this.currentBlock;this.count=Ae["c"].calClockCount(c,t.endBlock),clearInterval(this.timer),this.timer=setInterval((function(){return e.count--}),1e3)},getBetRecords:function(){var e=this,t=this.market.epoch;if(this.address&&t&&!this.recordLoading){var c='query{\n        bets(first: 200, orderBy:block, orderDirection:desc, where: {user: "'.concat(this.address,'"}) {\n          id\n          rewardLevel\n          rewardAmount\n          startPoint\n          endPoint\n          claimed\n          nft {\n            tokenId\n            grade\n            quality\n            resUrl\n          }\n          round {\n            id\n            epoch\n            endBlock\n            startAt\n            endAt\n          }\n        }\n      }');this.recordLoading=!0,Object(Se["b"])(c).then((function(c){var n=c.bets,l=[],a=[],r={};n.map((function(e){var c=e.round,n=e.nft;c.epoch===t?l.push(n):(delete e["round"],c.epoch!==r.epoch?(r={},Object.assign(r,c,{records:[e]}),a.push(r)):r.records.push(e))})),e.recordLoading=!1,e.gameCards=l.reverse(),e.currentLottery=a[0]||{records:[]},e.betRecords=a})).catch((function(){e.recordLoading=!1}))}},checkIsApproved:function(){var e=this;this.address&&this.$api.checkIsApproved().then((function(t){return e.isApproved=t}))},setApproved:function(){var e=this;this.authLoading=!0,this.$api.setApprovalForAll().then((function(){e.authLoading=!1,e.isApproved=!0})).catch((function(){e.authLoading=!1}))},getCardList:function(){var e=this;this.bagLoading||(this.bagLoading=!0,this.$api.gqlBagNftList(this.address).then((function(){e.bagLoading=!1})).catch((function(){e.bagLoading=!1})))},selectCard:function(e){var t=this.selectedIds.indexOf(e),c=this.selectedIds.length+this.gameCards.length;-1===t?c<5&&this.selectedIds.push(e):this.selectedIds.splice(t,1)},betNFT:function(){var e=this,t=this.selectedIds;t.length&&(this.betLoading=!0,this.$api.betNFT(t).then((function(){e.showSelection=!1,e.betLoading=!1,e.addCardsToGame(),e.deleteCard(t)})).catch((function(){e.betLoading=!1})))},addCardsToGame:function(){var e=this,t=this.selectedIds.map((function(t){return e.myCards.find((function(e){return e.id===t}))}));this.gameCards=this.gameCards.concat(t)},onSelect:function(e){this.currentLottery=e},recordClaim:function(e,t){if(!(t.claimed||t.rewardLevel<0)){var c=t.nft;this.$api.claimNFT(e.epoch,c.tokenId).then((function(){t.claimed=!0})).catch((function(){}))}}}),mounted:function(){this.checkIsApproved(),this.getBetRecords()},unmounted:function(){clearInterval(this.timer)}};c("0c1c");const ut=st()(bt,[["render",ye],["__scopeId","data-v-15bfdf0b"]]);t["default"]=ut}}]);
//# sourceMappingURL=chunk-2f4b7d76.3dcb314f.js.map