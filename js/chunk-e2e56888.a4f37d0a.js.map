{"version":3,"sources":["webpack:///./src/images/box.jpg","webpack:///./src/views/tradeFair/detailsNftCard.vue?78ef","webpack:///./src/views/tradeFair/detailsNftCard.vue","webpack:///./src/views/tradeFair/detailsNftCard.vue?a4e4"],"names":["module","exports","class","src","_imports_0","alt","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","$data","nftDetailInfo","defxToken","resUrl","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","tokenId","_hoisted_8","_hoisted_9","_hoisted_10","_ctx","language","label_lv","price_box_c","_hoisted_11","_hoisted_12","grade","price","_hoisted_13","_hoisted_14","label_attr","_hoisted_15","_hoisted_16","label_2_1","_hoisted_17","_hoisted_18","$options","dateFormatter","startTime","_hoisted_19","_hoisted_20","seller_box","_hoisted_21","seller","_hoisted_22","isWarrant","_hoisted_24","_createVNode","_component_m_button","loading","giveNftLoading","onClick","sellingCards","buy","_hoisted_23","warrantFn","btn_authorize","name","components","MButton","computed","mapState","mapGetters","watch","data","mobility","timer","mounted","this","$nextTick","detaInitFn","$route","query","id","isApprovedFn","methods","mapActions","str","format","$api","erc20Allowance","then","res","Number","erc20Approve","querymarketDetailFn","salesObject","initPrice","setInterval","catch","recordLoading","getSalesPriceFn","BN","toDisplay","toFixed","buyCardsFn","$toast","success","$router","push","path","__exports__","render"],"mappings":"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","file":"js/chunk-e2e56888.a4f37d0a.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/box.0bfc1710.jpg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./detailsNftCard.vue?vue&type=style&index=0&id=f25b9ade&lang=less&scoped=true\"","<template>\n  <div class=\"bag-details\">\n    <div class=\"heard\">\n      <div class=\"left-heard\">\n        <div>\n       \n          <img :src=\"nftDetailInfo.defxToken.resUrl\" alt=\"\" v-if=\"nftDetailInfo.defxToken\"/>\n          <img src=\"../../images/box.jpg\" alt=\"\" v-else/>\n        </div>\n      </div>\n\n      <div class=\"right-heard\">\n        <div class=\"title\">NFT#{{ nftDetailInfo.tokenId }}</div>\n\n        <div class=\"title-list\">\n          <div class=\"head\">\n            <div  v-if=\"nftDetailInfo.defxToken\">{{language.label_lv}}</div>\n            <div>{{language.price_box_c}}</div>\n          </div>\n          <div class=\"head-value\">\n            <div v-if=\"nftDetailInfo.defxToken\">Lv.{{ nftDetailInfo.defxToken.grade }}</div>\n            <div>{{ price }}</div>\n          </div>\n        </div>\n\n        <div class=\"attribute\">\n          <div class=\"attribute-title\">{{language.label_attr}}</div>\n          <div class=\"box box-txt\">\n            <div class=\"box-color\" style=\"color: #8c8f96;font-size:18px\">{{language.label_2_1}}</div>\n            <!-- <div class=\"\">代币数量</div> -->\n          </div>\n          <div class=\"box box-color\">\n            <div class=\"\">{{ dateFormatter(nftDetailInfo.startTime) }}</div>\n          </div>\n          <!-- <div class=\"box-color\">\n              <div class=\"font-s-color\">{{language.label_2_3}}</div>\n              <div class=\"word-wrap\">{{ nftDetailInfo.startHash }}</div>\n          </div> -->\n          <div class=\"box-color\">\n          <div class=\"font-s-color\">{{language.seller_box}}</div>\n            <div class=\"word-wrap\">{{ nftDetailInfo.seller }}</div>\n          </div>\n        </div>\n\n        <div class=\"cards\">\n          <div  v-if=\"!isWarrant\">\n            <m-button\n              class=\"btn hdr-el-blue\"\n              :loading=\"giveNftLoading\"\n              @click=\"warrantFn\"\n            >\n              <span>{{language.btn_authorize}}</span>\n            </m-button>\n          </div>\n\n          <div v-else>\n            <m-button\n              class=\"btn hdr-el-blue\"\n              :loading=\"giveNftLoading\"\n              @click=\"sellingCards\"\n            >\n              <span>{{language.buy}}</span>\n            </m-button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { dateFormatter } from \"@/common/dataConvertor\";\nimport { BN } from \"@/common/util\";\nimport { mapActions, mapGetters, mapState } from \"vuex\";\n// import MPopper from \"@/components/mPopper\";\nimport MButton from \"@/components/mButton\";\n// import { nftGraphql } from \"@/common/api\";\n\nexport default {\n  name: \"nftBag\",\n  components: { MButton },\n  computed: {\n    ...mapState(\"app\", [\"address\"]),\n    ...mapState(\"nft\", [\"myCards\"]),\n    ...mapGetters([\"language\"]),\n  },\n  watch: {},\n  data() {\n    return {\n      isWarrant: false,\n      nftDetailInfo: { defxToken :{}},\n      mobility: \"\",\n      price: \"\",\n      giveNftLoading:false,\n      timer:\"\",\n    };\n  },\n  mounted() {\n    this.$nextTick(()=>{\n      this.detaInitFn(this.$route.query.id);\n      this.isApprovedFn();\n    })\n    \n  },\n  methods: {\n    ...mapActions(\"nft\", [\"setMyCards\", \"deleteCard\"]),\n    dateFormatter(str) {\n      return str ? dateFormatter(str).format(\"yyyy-MM-dd\") : \"???-??-??\";\n    },\n\n    // erc20Allowance\n    // 判断是否授权\n    isApprovedFn() {\n      this.$api.erc20Allowance(\"nftmarket\",\"DFT\").then((res) => {\n        this.isWarrant = Number(res) ;\n      });\n    },\n    // 授权\n    warrantFn() {\n      this.$api.erc20Approve(\"nftmarket\",\"DFT\").then(() => {\n          this.isWarrant = true;\n      });\n    },\n    //  获取详情\n    detaInitFn(id) {\n       this.$api.querymarketDetailFn(id).then((res)=>{\n         this.nftDetailInfo = res.salesObject;\n          // this.mobility = new BN(res.defxToken.amount).toDisplay(18).toFixed(4);\n          this.initPrice();\n          this.timer =  setInterval(() => {\n            this.initPrice();\n          }, 30000);\n       })\n        .catch(() => {\n          this.recordLoading = false;\n        });\n    },\n    // 显示价格\n    initPrice() {\n      this.$api.getSalesPriceFn(this.nftDetailInfo.id).then((res) => {\n        this.price = new BN(res).toDisplay(18).toFixed(2);\n      });\n    },\n    // 购买\n    sellingCards() {\n      this.giveNftLoading = true;\n        this.$api.buyCardsFn(this.nftDetailInfo.id).then(() => {\n           this.giveNftLoading = false;\n           this.$toast.success(\"购买成功了，请前往背包查看！\")\n              this.$router.push({\n              path:\"/tradeFair/market\"\n            })\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.bag-details {\n  padding: 20px 50px 20px 50px;\n  .heard {\n    display: flex;\n    .left-heard {\n      width: 488px;\n      height: 560px;\n      background: #191f2d;\n      border-radius: 10px;\n      div {\n        width: 323px;\n        height: 531px;\n        display: flex;\n        margin: 0 auto;\n        justify-content: center;\n        align-items: center;\n        text-align: center;\n        img {\n          width: 323px;\n          height: 456px;\n        }\n      }\n    }\n    .right-heard {\n      width: 978px;\n      height: 560px;\n      background: #191f2d;\n      border-radius: 10px;\n      margin-left: 30px;\n      padding: 30px;\n      .title {\n        font-size: 30px;\n        font-weight: bold;\n        color: #ffffff;\n      }\n      .title-list {\n        width: 736px;\n        height: 96px;\n        background: #1f232b;\n        box-shadow: 0px 3px 2px 0px rgba(0, 0, 0, 0.35);\n        border-radius: 20px;\n        padding: 10px 10px 10px 30px;\n        margin-top: 20px;\n        .head {\n          font-size: 20px;\n          display: flex;\n          div {\n            flex: 1;\n          }\n        }\n        .head-value {\n          font-size: 16px;\n          display: flex;\n          font-weight: bold;\n          color: #ffffff;\n          padding-top: 10px;\n          div {\n            flex: 1;\n          }\n        }\n      }\n      .attribute {\n        width: 736px;\n        height: 240px;\n        background: #1f232b;\n        box-shadow: 0px 3px 2px 0px rgba(0, 0, 0, 0.35);\n        border-radius: 20px;\n        padding: 20px;\n        margin-top: 20px;\n        .attribute-title {\n          font-size: 20px;\n          color: #ffffff;\n        }\n        .box {\n          // margin-top: 15px;\n          display: flex;\n          div {\n            flex: 1;\n          }\n        }\n        .box-color {\n          padding-top: 20px;\n          font-size: 16px;\n          color: #ffffff;\n        }\n        .box-txt {\n          font-size: 14px;\n          color: #8c8f96;\n        }\n      }\n      .cards {\n        display: flex;\n        div {\n          margin-top: 40px;\n          margin-right: 80px;\n        }\n      }\n    }\n  }\n  .upgradeCards {\n    width: 1502px;\n    height: 678px;\n    background: url(\"../../images/myback.jpg\") no-repeat;\n    background-size: 100% 100%;\n    border-radius: 10px;\n    padding: 20px 30px;\n    margin-top: 20px;\n    .cards-title {\n      font-size: 30px;\n      font-weight: bold;\n      color: #ffffff;\n    }\n    .grade {\n      font-size: 18px;\n      color: #ffffff;\n      padding: 20px 0;\n      display: flex;\n      justify-content: space-between;\n      .upgrade-box {\n        padding-right: 30px;\n      }\n    }\n    .tips {\n      font-size: 14px;\n      color: #8c8f96;\n    }\n    .upgrade-img-list {\n      display: flex;\n      margin-top: 150px;\n      .upgrade-img {\n        font-size: 19px;\n        color: #ffffff;\n        width: 201px;\n        height: 283px;\n        background: #1f232b;\n        box-shadow: 0px 3px 2px 0px rgba(0, 0, 0, 0.35);\n        border-radius: 20px;\n        position: relative;\n        margin: 0 auto;\n        justify-content: center;\n        align-items: center;\n        display: flex;\n        .lev {\n          position: absolute;\n          top: -30px;\n          left: 70px;\n        }\n        .onNft {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          width: 50px;\n          height: 50px;\n          margin: 0 auto;\n          font-weight: bold;\n          font-size: 32px;\n          cursor: pointer;\n        }\n        img {\n          width: 201px;\n          height: 283px;\n          border-radius: 20px;\n        }\n      }\n    }\n  }\n}\n  .word-wrap{\n    // width: 100px;\n    word-wrap: break-word;\n    word-break: normal;\n    padding-right: 35px;\n  }\n  .font-s-color{\n      padding-bottom: 10px;\n      color: #8c8f96;\n      font-size: 18px;\n  }\n @media screen and (max-width: 479px) {\n      .bag-details {\n          padding:0 !important;\n      }\n      .heard{\n            display: block !important;\n      }\n      .left-heard{\n        width: 360px !important;\n        margin: 20px auto 20px auto !important;\n        height: 435px !important; \n       img{\n          height: 400px !important;\n       }\n       div{\n             height: 430px !important;\n       }\n      }\n      .right-heard{\n         width: 360px !important; \n         margin: 0 auto !important;\n         height: 640px !important;\n      }\n      .title-list{\n         width: 310px !important;\n      }\n      .attribute{\n        width: 310px !important;\n        height: 250px !important;\n      }\n    .cards div{\n      margin-top: 20px !important;\n    }\n    \n  }\n    \n</style>","import { render } from \"./detailsNftCard.vue?vue&type=template&id=f25b9ade&scoped=true\"\nimport script from \"./detailsNftCard.vue?vue&type=script&lang=js\"\nexport * from \"./detailsNftCard.vue?vue&type=script&lang=js\"\n\nimport \"./detailsNftCard.vue?vue&type=style&index=0&id=f25b9ade&lang=less&scoped=true\"\n\nimport exportComponent from \"/home/alx110/defx-frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f25b9ade\"]])\n\nexport default __exports__"],"sourceRoot":""}