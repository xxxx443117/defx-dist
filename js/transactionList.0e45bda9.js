(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["transactionList"],{"02a2":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),n=a("58fa"),i=a.n(n),o=a("2ad9"),l=a.n(o),s=a("27dd"),r=a.n(s),d=a("7c4a"),b=a.n(d);const p=e=>(Object(c["pushScopeId"])("data-v-574af2e6"),e=e(),Object(c["popScopeId"])(),e),m={class:"option-record"},g={class:"list-box"},O={key:0,class:"m-folder-list"},j={class:"detail-info animate-inout open"},u={class:"main-info flex jc-between ai-center"},y=["src"],h={class:"c1"},N=p(()=>Object(c["createElementVNode"])("br",null,null,-1)),k={class:"text"},w={class:"c2"},V=p(()=>Object(c["createElementVNode"])("br",null,null,-1)),x={class:"text"},E={class:"c520"},f={key:0,class:"my-spna-div"},D={key:1,class:"my-spna-div"},B={key:0},S={key:1},T={class:"text text-nowrap"},_={class:"base-info flex jc-between"},v={class:"s1"},L=p(()=>Object(c["createElementVNode"])("br",null,null,-1)),P={class:"text fs-20"},C={class:"s3 ta-right"},F=p(()=>Object(c["createElementVNode"])("br",null,null,-1)),I={key:0,class:"text"},$=p(()=>Object(c["createElementVNode"])("br",null,null,-1)),M={class:"fs-20 text"},R={class:"s100"},z=p(()=>Object(c["createElementVNode"])("br",null,null,-1)),H={class:"flex ai-center text"},U={key:0,class:"icon",src:i.a,alt:""},q={key:1,class:"icon",src:l.a,alt:""},J=p(()=>Object(c["createElementVNode"])("br",null,null,-1)),W={class:"text"},A={class:"flex jc-between ai-center"},G={class:""},K={class:"res-text d-ib text"},Q=p(()=>Object(c["createElementVNode"])("br",null,null,-1)),X={class:"gain d-ib text fs-20"},Y={class:"block flex jc-between ta-center"},Z=p(()=>Object(c["createElementVNode"])("span",null,null,-1)),ee=["onClick"],te={class:"aoptionBlock",style:{"margin-top":"10px"}},ae=p(()=>Object(c["createElementVNode"])("br",null,null,-1)),ce=p(()=>Object(c["createElementVNode"])("img",{class:"icon-l",src:r.a,alt:""},null,-1)),ne={key:0},ie={class:"my-ul-box"},oe={class:"no-data flex jc-center ai-center"},le={class:"text fs-16 ta-center"},se=p(()=>Object(c["createElementVNode"])("img",{src:b.a,alt:"nodata"},null,-1)),re=p(()=>Object(c["createElementVNode"])("br",null,null,-1)),de={key:1,class:"mask flex jc-center ai-center ta-center"},be=p(()=>Object(c["createElementVNode"])("i",{class:"icon-loading"},null,-1)),pe=p(()=>Object(c["createElementVNode"])("br",null,null,-1));function me(e,t,a,n,i,o){const l=Object(c["resolveComponent"])("m-button");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",m,[Object(c["createElementVNode"])("div",g,[i.transactionList.length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("ul",O,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(i.transactionList,t=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t.id,class:"my-li"},[Object(c["createElementVNode"])("div",j,[Object(c["createElementVNode"])("div",u,[Object(c["createElementVNode"])("b",{class:Object(c["normalizeClass"])(["win-text","0"!==o.displayProfit(t.symbol,t.direction,t.strike,t.amount,t.optionPrice)?"green":"red"])},Object(c["toDisplayString"])("0"!==o.displayProfit(t.symbol,t.direction,t.strike,t.amount,t.optionPrice)?e.language.win:e.language.lose),3),Object(c["createElementVNode"])("img",{class:"win-text",src:0===t.direction?i.downImage:i.upImage,alt:""},null,8,y),Object(c["createElementVNode"])("span",h,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.language.type),1),N,Object(c["createElementVNode"])("b",k,Object(c["toDisplayString"])(t.symbol),1)]),Object(c["createElementVNode"])("span",w,[Object(c["createTextVNode"])("P&L"),V,Object(c["createElementVNode"])("b",x,Object(c["toDisplayString"])(t.PL),1)]),Object(c["createElementVNode"])("span",E,[1==i.tabIndex?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",f,Object(c["toDisplayString"])(e.language.purchaseDays),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",D,[t.countdownTime<=0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",B,Object(c["toDisplayString"])(e.language.overdue),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",S,Object(c["toDisplayString"])(e.language.countdown),1))])),Object(c["createElementVNode"])("div",T,Object(c["toDisplayString"])(t.displayCountdown),1)])]),Object(c["createElementVNode"])("p",_,[Object(c["createElementVNode"])("span",v,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.language.aoption_lp_amount),1),L,Object(c["createElementVNode"])("b",P,Object(c["toDisplayString"])(t.amount)+" "+Object(c["toDisplayString"])(t.symbol),1)]),Object(c["createElementVNode"])("span",C,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.language.aoption_trade_amount),1),F,Object(c["createTextVNode"])("$ "),t.optionPrice?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",I,Object(c["toDisplayString"])(t.optionPrice.substr(0,10)),1)):Object(c["createCommentVNode"])("",!0)])]),Object(c["withDirectives"])(Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["res-box flex jc-between ai-center border-gray hdr-el-gray",{"border-green hdr-el-green":!0,"border-red hdr-el-red":!1}])},[Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["s1",i.listeningLanguage?"":"s120"])},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.language.aoption_trade_price)+"($)",1),$,Object(c["createElementVNode"])("b",M,Object(c["toDisplayString"])(t.displayStrike),1)],2),Object(c["createElementVNode"])("span",R,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.language.aoption_draw_price)+"($)",1),z,Object(c["createElementVNode"])("span",H,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(o.displayEvenPrive(t.strike,t.direction,t.amount,t.optionPrice))+" ",1),"0"!==o.displayProfit(t.symbol,t.direction,t.strike,t.amount,t.optionPrice)?(Object(c["openBlock"])(),Object(c["createElementBlock"])("img",U)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("img",q))])]),Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["ta-right",i.listeningLanguage?"s100":"s70"])},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.language.aoption_currency_price)+"($)",1),J,Object(c["createElementVNode"])("span",W,Object(c["toDisplayString"])(i.coinPrices[t.symbol].price.toDisplay(i.coinPrices[t.symbol].decimals).myFixed()),1)],2)],512),[[c["vShow"],!0]]),Object(c["createElementVNode"])("footer",A,[Object(c["createElementVNode"])("p",G,[Object(c["createElementVNode"])("span",K,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.language.aoption_pre_profit)+" USDT",1),Q,Object(c["createElementVNode"])("b",X,Object(c["toDisplayString"])(o.displayProfit(t.symbol,t.direction,t.strike,t.amount,t.optionPrice)),1)])]),Object(c["createElementVNode"])("p",Y,[Z,Object(c["createElementVNode"])("span",{onClick:e=>o.openBlock(t.createHash)},[Object(c["createElementVNode"])("span",te,Object(c["toDisplayString"])(e.language.aoption_block),1),Object(c["createTextVNode"])(),ae,ce],8,ee)]),3!==t.state&&2!==t.state?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ne,["0"!==o.displayProfit(t.symbol,t.direction,t.strike,t.amount,t.optionPrice)&&t.countdownTime>=0?(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:0,class:"btn-claim hdr-el-blue",ref_for:!0,ref:"btn-"+t.id,onClick:a=>o.exerciseOptionFacade(t.id,t.direction,t.symbol,e.$refs["btn-"+t.id])},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.language.aoption_wind_up),1)]),_:2},1032,["onClick"])):(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:1,style:{width:"90px"},class:"btn-claim hdr-el-gray border-gray gray",disabled:""},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.language.aoption_wind_up),1)]),_:1}))])):Object(c["createCommentVNode"])("",!0),3==t.state?(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:1,style:{width:"90px"},class:"btn-claim hdr-el-gray border-gray gray",disabled:""},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.language.time_out),1)]),_:1})):Object(c["createCommentVNode"])("",!0),2==t.state?(Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:2,style:{width:"90px"},class:"btn-claim hdr-el-gray border-gray gray",disabled:""},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.language.exercised),1)]),_:1})):Object(c["createCommentVNode"])("",!0)])])]))),128))])):Object(c["createCommentVNode"])("",!0),Object(c["withDirectives"])(Object(c["createElementVNode"])("ul",ie,[Object(c["createElementVNode"])("li",oe,[Object(c["createElementVNode"])("p",le,[se,re,Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.language.no_data),1)])])],512),[[c["vShow"],!i.loading&&0===i.transactionList.length]]),i.loading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",de,[Object(c["createElementVNode"])("span",null,[be,pe,Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.language.tip_loading)+"...",1)])])):Object(c["createCommentVNode"])("",!0)])])}var ge=a("321e"),Oe=a("5502"),je=a("9895"),ue=a("5710"),ye=a("325c"),he=a("8e1e"),Ne=a.n(he),ke=a("cca6"),we=a.n(ke),Ve=a("b277"),xe={name:"optionRecord",components:{MButton:ue["a"],MTabs:ge["a"]},computed:{...Object(Oe["d"])("app",["locale"]),...Object(Oe["c"])(["language"]),...Object(Oe["d"])("app",["address","device","getOptionList"]),...Object(Oe["d"])("option",["currentRounds","contractName"]),...Object(Oe["d"])("aoption",["options"])},watch:{getOptionList(e){1==e?(clearInterval(this.timer),this.timer=null,this.getTrade()):(this.getList(),this.timer=setInterval(()=>{this.getList()},1e3))},currentRounds(){this.getList()},locale(e){this.listeningLanguage="de_DE"==e||"fr"==e||"es"==e||"en"==e}},data(){return{timer:null,statusOption:null,listeningLanguage:!1,upImage:Ne.a,downImage:we.a,tabIndex:0,tabs:[{type:0,language_key:"aoption_holding_trade"},{type:1,language_key:"aoption_history_trade"}],transactionList:[],loading:!1,openFlag:{},roundMap:{5:"5M",15:"15M"},coinPrices:(()=>{const e={};return Ve["a"].forEach(t=>{e[t.symbol]={price:new ye["b"](0),decimals:8}}),e})()}},methods:{getCoinPrice(e,t){this.$api.getLatestPrice(e).then(e=>{this.coinPrices[t].price=new ye["b"](e.answer),this.coinPrices[t].decimals=Number(e.decimals),console.log(this.coinPrices)})},displayEvenPrive(e,t,a,c){return 1===t?new ye["b"](e).toDisplay().plus(new ye["b"](c).div(new ye["b"](a).toWei("balance").toString(10))).myFixed():new ye["b"](e).toDisplay().minus(new ye["b"](c).div(new ye["b"](a).toWei("balance").toString(10))).myFixed()},displayProfit(e,t,a,c){const n=this.coinPrices[e].price;if(1===t){const e=n.minus(a);if(e.isLessThanOrEqualTo(0))return"0";const t=e.times(c).toDisplay();return new ye["b"](t).toFixed(6)}const i=new ye["b"](a).minus(n);if(i.isLessThanOrEqualTo(0))return"0";const o=i.times(c).toDisplay();return new ye["b"](o).toFixed(6)},getCountdownTime(e,t,a,c){let n=0;const i=Object(ye["i"])(Object(ye["j"])(a),c);n=e?Number(t)+Number(this.options[i].lockupPeriodForHedgedTranches):Number(t)+Number(this.options[i].lockupPeriodForUnhedgedTranches);const o=(new Date).getTime(),l=1e3*n-o;return l},getList(){this.loading||(this.tabIndex=0,this.$api.getFacadeHistoryList(this.address,1).then(({options:e})=>{const t=(new Date).getTime();this.transactionList=e.map(e=>{const a=1e3*Number(e.expiredtime)-t,c=a>=0;let n="";if(c){n=new Date(a).countdown("dd{day},hh:mm:ss").replace("{day}",this.language.d);let e=n.split(",")[0],t=n.split(",")[1],c=e.substr(1);n=c+t}else n=new Date(a).countdown("dd{day}").replace("{day}",this.language.d),n=n?n.split("-")[1]:0;const i=new Date(1e3*Number(e.timestamp)).format("yyyy-MM-dd"),o="0";return{countdownTime:a,...e,displayCountdown:n,isEnd:c,displayTimestamp:i,drawPrice:o,displayStrike:new ye["b"](e.strike).toDisplay().myFixed(),PL:0}})}).catch(e=>{console.error(e)}))},getTrade(){this.loading||(this.tabIndex=1,this.loading=!0,this.$api.getFacadeHistoryTrade(this.address,1).then(({options:e})=>{this.loading=!1;const t=(new Date).getTime();this.transactionList=e.map(e=>{const a=1e3*Number(e.expiredtime)-t,c=a>=0,n=c?"00:00":new Date(a).countdown("dd{day}").replace("{day}",this.language.d),i=n?n.split("-")[1]:0,o=new Date(1e3*Number(e.timestamp)).format("yyyy-MM-dd"),l="0";return{...e,displayCountdown:i,isEnd:c,displayTimestamp:o,drawPrice:l,displayStrike:new ye["b"](e.strike).toDisplay().myFixed(),PL:0}})}).catch(e=>{console.error(e),this.loading=!1}))},claim(e,t){t.setLoading(!0),this.$api.exerciseOptionFacade(e).then(()=>{t.setLoading(!1),this.$api.getBalance(),this.deleteRow(e)}).catch(()=>{t.setLoading(!1)})},exerciseOptionFacade(e,t,a,c){c.setLoading(!0);const n=Object(ye["i"])(Object(ye["j"])(t),a);this.$api.exerciseOptionFacade(e,n).then(()=>{this.$toast.success(this.language.aoption_success),this.getList()}).catch(e=>{console.log(e),4001!==(null===e||void 0===e?void 0:e.code)&&this.$toast.error(this.language.aoption_fail)}).finally(()=>{c.setLoading(!1)})},deleteRow(e){let t=this.data,a=t.findIndex(({round:t})=>t.epoch===e);-1!==a&&t.splice(a,1)},openBlock(e){window.open(je["b"].host+e)}},beforeMount(){1==this.getOptionList?(clearInterval(this.timer),this.timer=null,this.getTrade()):(this.getList(),this.timer=setInterval(()=>{this.getList()},1e3)),this.getCoinPrice(Ve["a"][0].priceContractName,Ve["a"][0].symbol);let e=this.locale;"de_DE"!=e&&"fr"!=e&&"es"!=e&&"en"!=e||(this.listeningLanguage=!0)},beforeUnmount(){clearInterval(this.timer),this.timer=null}},Ee=(a("e74c"),a("d959")),fe=a.n(Ee);const De=fe()(xe,[["render",me],["__scopeId","data-v-574af2e6"]]);t["default"]=De},5864:function(e,t,a){},e74c:function(e,t,a){"use strict";a("5864")}}]);
//# sourceMappingURL=transactionList.0e45bda9.js.map