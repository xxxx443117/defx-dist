(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47d991f9"],{"3a14":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAnCAYAAACMo1E1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNDk1MjNEN0MzNEExMUVCQjg2NzlGMEZBNDFBODNDMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBNDk1MjNEOEMzNEExMUVCQjg2NzlGMEZBNDFBODNDMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkE0OTUyM0Q1QzM0QTExRUJCODY3OUYwRkE0MUE4M0MwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkE0OTUyM0Q2QzM0QTExRUJCODY3OUYwRkE0MUE4M0MwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+FCTZXwAABm1JREFUeNq8WHtsFEUY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"},4638:function(e,t,c){},"63cf":function(e,t,c){},7043:function(e,t,c){"use strict";c("63cf")},7610:function(e,t,c){e.exports=c.p+"img/lottery.4582f4a2.png"},9923:function(e,t,c){"use strict";c("ab58")},9991:function(e,t,c){"use strict";c("4638")},ab58:function(e,t,c){},ae84:function(e,t,c){e.exports=c.p+"img/bg-1@2x.4c0bffac.png"},dc3a:function(e,t,c){"use strict";var l=c("7a23"),a=c("1975"),n=c.n(a);const r=e=>(Object(l["pushScopeId"])("data-v-f8572646"),e=e(),Object(l["popScopeId"])(),e),o={class:"popper-box"},s={class:"frame"},i={class:"flex jc-between ai-center"},d={class:"text"},b={class:"p-content"},m=r(()=>Object(l["createElementVNode"])("footer",null,null,-1));function j(e,t,c,a,r,j){return r.p_value?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:0,class:Object(l["normalizeClass"])(["m-popper flex jc-center ai-center",r.lifeClass]),onClick:t[1]||(t[1]=Object(l["withModifiers"])((...e)=>j.hide&&j.hide(...e),["self"]))},[Object(l["createElementVNode"])("div",o,[Object(l["createElementVNode"])("div",s,[Object(l["createElementVNode"])("header",i,[Object(l["createElementVNode"])("span",d,[Object(l["renderSlot"])(e.$slots,"title",{},()=>[Object(l["createTextVNode"])("Title")],!0)]),Object(l["createElementVNode"])("img",{class:"btn-close",src:n.a,onClick:t[0]||(t[0]=(...e)=>j.hide&&j.hide(...e)),alt:""})]),Object(l["createElementVNode"])("div",b,[Object(l["renderSlot"])(e.$slots,"default",{},void 0,!0)]),m])])],2)):Object(l["createCommentVNode"])("",!0)}var p={name:"mPopper",props:{modelValue:{type:Boolean,require:!0}},emits:["update:modelValue"],data(){return{p_value:!1,lifeClass:"hide"}},watch:{modelValue(e){e?this.show():this.hide()}},methods:{setLifeClass(e){this.lifeClass=e?"show":"hide"},show(){this.p_value=!0,this.$emit("update:modelValue",!0),setTimeout(()=>this.setLifeClass(!0),20)},hide(){this.setLifeClass(!1),setTimeout(()=>{this.p_value=!1,this.$emit("update:modelValue",!1)},300)}},mounted(){this.setLifeClass(this.modelValue)}},O=(c("9923"),c("d959")),u=c.n(O);const h=u()(p,[["render",j],["__scopeId","data-v-f8572646"]]);t["a"]=h},e849:function(e,t,c){"use strict";c.r(t);var l=c("7a23"),a=c("3a14"),n=c.n(a),r=c("e719"),o=c.n(r),s=c("7610"),i=c.n(s);const d=e=>(Object(l["pushScopeId"])("data-v-99d8b150"),e=e(),Object(l["popScopeId"])(),e),b={class:"nft-lottery page flex flex-column container-full"},m={class:"down flex1 flex"},j={class:"nft-game box b1 flex flex-column p-25"},p={class:"tt flex jc-between ai-center"},O={class:"text fs-20"},u={class:"card-list flex jc-between"},h={class:"card flex jc-center ai-center shadow-active"},g=["src"],E={class:"no-lv flex jc-between ai-center"},N=d(()=>Object(l["createElementVNode"])("div",{class:"card flex jc-center ai-center shadow-active"},[Object(l["createElementVNode"])("span",{class:"hdr-text-blue fs-16"},"NFT")],-1)),V=d(()=>Object(l["createElementVNode"])("p",{class:"no-lv flex jc-between ai-center"},null,-1)),k={class:"flex"},f={class:"context flex1 flex ai-center"},v={class:"flex jc-between ai-center text"},y=d(()=>Object(l["createElementVNode"])("br",null,null,-1)),w={class:"fs-20"},B={class:"ta-right"},x=d(()=>Object(l["createElementVNode"])("br",null,null,-1)),S={class:"fs-20"},D={class:"pool flex ai-center"},A=["src"],C=d(()=>Object(l["createElementVNode"])("br",null,null,-1)),L={class:"fs-20"},I={class:"select-box ta-center"},M={class:"wrap"},F=["onClick"],R=["src"],z={class:"c-info text animate-inout"},T={class:"lv"},G={class:"no"},Y=d(()=>Object(l["createElementVNode"])("img",{class:"icon",src:n.a,alt:""},null,-1)),Z={key:0,class:"mask flex jc-center ai-center"},J=d(()=>Object(l["createElementVNode"])("span",{class:"icon-loading"},null,-1)),U=[J],W={class:"tips flex jc-between"},Q={class:"ta-left"},X={class:"ta-right"},_={class:"box b2 flex1 flex flex-column p-25"},H={class:"tt flex jc-between ai-center"},K={class:"text fs-20"},P={class:"epoch bg-radius flex ai-center"},q={class:"text flex1"},$={class:"fs-25 no"},ee=d(()=>Object(l["createElementVNode"])("img",{class:"icon",src:o.a,alt:""},null,-1)),te=["onClick"],ce={class:"fs-16"},le={class:"flex jc-between p-25"},ae={class:"flex1 flex ai-center"},ne={class:"record-list flex ai-center flex-wrap",style:{width:"100%"}},re=["onClick"],oe={key:0,class:"ta-center"},se={class:"text fs-18"},ie={key:1,class:"flex ai-center"},de=["src"],be={key:0},me=d(()=>Object(l["createElementVNode"])("br",null,null,-1)),je={class:"fs-20"},pe={key:1},Oe=d(()=>Object(l["createElementVNode"])("br",null,null,-1)),ue={class:"fs-20"},he={class:"btn-tip text absolute"},ge={key:1,class:"nft-item bg-radius flex jc-center ai-center"},Ee=d(()=>Object(l["createElementVNode"])("b",{class:"text fs-18"},"#——",-1)),Ne=[Ee],Ve={key:1,class:"flex1 flex jc-center ai-center"},ke={class:"ta-center",style:{"padding-bottom":"30px"}},fe=d(()=>Object(l["createElementVNode"])("img",{src:i.a,alt:"",style:{width:"140px"}},null,-1)),ve={class:"fs-16 text"};function ye(e,t,c,a,n,r){const o=Object(l["resolveComponent"])("lottery-reward"),s=Object(l["resolveComponent"])("m-button"),i=Object(l["resolveComponent"])("m-popper");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",b,[Object(l["createVNode"])(o,{class:"up"}),Object(l["createElementVNode"])("div",m,[Object(l["createElementVNode"])("div",j,[Object(l["createElementVNode"])("div",p,[Object(l["createElementVNode"])("span",O,Object(l["toDisplayString"])(e.language.tt_4_1),1),Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(n.isApproved?e.language.tip_1_2:e.language.tip_1_1),1)]),Object(l["createElementVNode"])("ul",u,[(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(5,e=>Object(l["createElementVNode"])("li",{class:"text",key:e},[n.gameCards[e-1]?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createElementVNode"])("div",h,[Object(l["createElementVNode"])("img",{class:"card-img",src:n.gameCards[e-1].resUrl,alt:""},null,8,g)]),Object(l["createElementVNode"])("p",E,[Object(l["createElementVNode"])("span",null,"#"+Object(l["toDisplayString"])(n.gameCards[e-1].tokenId||n.gameCards[e-1].id),1),Object(l["createElementVNode"])("span",null,"Lv."+Object(l["toDisplayString"])(n.gameCards[e-1].grade),1)])],64)):(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[N,V],64))])),64))]),Object(l["createElementVNode"])("div",k,[n.isApproved?(Object(l["openBlock"])(),Object(l["createBlock"])(s,{key:0,class:"btn hdr-el-blue",onClick:t[0]||(t[0]=e=>{n.selectedIds=[],n.showSelection=!0,r.getCardList()})},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(e.language.btn_add_card),1)]),_:1})):(Object(l["openBlock"])(),Object(l["createBlock"])(s,{key:1,class:"btn auth hdr-el-blue",loading:n.authLoading,onClick:t[1]||(t[1]=e=>r.setApproved())},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(e.language.btn_authorize),1)]),_:1},8,["loading"]))]),Object(l["createElementVNode"])("div",f,[Object(l["createElementVNode"])("ul",v,[Object(l["createElementVNode"])("li",null,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.language.lottery_no),1),y,Object(l["createElementVNode"])("b",w,"NO. "+Object(l["toDisplayString"])(e.market.epoch),1)]),Object(l["createElementVNode"])("li",B,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.language.end_clock),1),x,Object(l["createElementVNode"])("b",S,Object(l["toDisplayString"])(r.countDisplay),1)]),Object(l["createElementVNode"])("li",D,[Object(l["createElementVNode"])("img",{src:n.coinMap.DFT,alt:"DFT",class:"icon-m"},null,8,A),Object(l["createElementVNode"])("p",null,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.language.tt_4_3),1),C,Object(l["createElementVNode"])("b",L,Object(l["toDisplayString"])(e.market.rewardAmount||"——"),1)])])])]),Object(l["createVNode"])(i,{modelValue:n.showSelection,"onUpdate:modelValue":t[3]||(t[3]=e=>n.showSelection=e)},{title:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.language.tt_4_2),1)]),default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",I,[Object(l["createElementVNode"])("ul",M,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(n.myCardsList,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{class:Object(l["normalizeClass"])(["select-item flex",{active:-1!==n.selectedIds.indexOf(e.id)}]),onClick:t=>r.selectCard(e.id),key:e.id},[Object(l["createElementVNode"])("img",{class:"card-img",src:e.resUrl,alt:""},null,8,R),Object(l["createElementVNode"])("div",z,[Object(l["createElementVNode"])("b",T,"Lv."+Object(l["toDisplayString"])(e.grade),1),Object(l["createElementVNode"])("b",G,"#"+Object(l["toDisplayString"])(e.id),1)]),Y],10,F))),128)),n.bagLoading?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Z,U)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("p",W,[Object(l["createElementVNode"])("span",Q,"* "+Object(l["toDisplayString"])(e.language.tip_1_4),1),Object(l["createElementVNode"])("span",X,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.language.tip_1_5),1),Object(l["createElementVNode"])("b",null,Object(l["toDisplayString"])(5-n.gameCards.length-n.selectedIds.length),1)])]),Object(l["createVNode"])(s,{class:"hdr-el-blue",onClick:t[2]||(t[2]=e=>r.betNFT()),loading:n.betLoading},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(e.language.btn_put_card),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue"])]),Object(l["createElementVNode"])("div",_,[Object(l["createElementVNode"])("div",H,[Object(l["createElementVNode"])("span",K,Object(l["toDisplayString"])(e.language.lottery_record),1)]),n.betRecords.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createElementVNode"])("div",P,[Object(l["createElementVNode"])("div",q,[Object(l["createElementVNode"])("div",{class:"no-selector flex ai-center relative p-25",onClick:t[4]||(t[4]=e=>n.showList=!n.showList)},[Object(l["createElementVNode"])("b",$,"NO. "+Object(l["toDisplayString"])(n.currentLottery.epoch||"——"),1),ee,Object(l["createElementVNode"])("ul",{class:Object(l["normalizeClass"])(["select-list absolute shadow-active",{active:n.showList}])},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(n.betRecords,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{class:Object(l["normalizeClass"])(["flex jc-between p-25",{active:n.currentLottery.epoch===e.epoch}]),onClick:t=>r.onSelect(e),key:e.epoch},[Object(l["createElementVNode"])("b",ce,"NO. "+Object(l["toDisplayString"])(e.epoch),1),Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(r.dateFormatter(e.startAt)),1)],10,te))),128))],2)]),Object(l["createElementVNode"])("p",le,[Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(r.dateFormatter(n.currentLottery.endAt)),1),Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(e.language.round_ended),1)])])]),Object(l["createElementVNode"])("div",ae,[Object(l["createElementVNode"])("ul",ne,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(r.currentRecords,t=>{var c,a;return Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:t.id},[t.id?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:0,class:Object(l["normalizeClass"])(["nft-item bg-radius flex jc-center ai-center relative",`reward-${t.rewardLevel+1} ${!t.claimed&&t.rewardLevel>=0?"unclaimed":""}`]),onClick:e=>r.recordClaim(n.currentLottery,t)},[t.rewardLevel<0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",oe,[Object(l["createElementVNode"])("p",null,Object(l["toDisplayString"])(e.language.prize_0),1),Object(l["createElementVNode"])("b",se,"#"+Object(l["toDisplayString"])((null===(c=t.nft)||void 0===c?void 0:c.tokenId)||"——"),1)])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ie,[Object(l["createElementVNode"])("img",{class:"icon-l",src:n.prizeMap[t.rewardLevel],alt:""},null,8,de),t.claimed?(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",be,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.language.order_claimed),1),me,Object(l["createElementVNode"])("b",je,"#"+Object(l["toDisplayString"])((null===(a=t.nft)||void 0===a?void 0:a.tokenId)||"——"),1)])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",pe,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.language.reward)+"(DFT)",1),Oe,Object(l["createElementVNode"])("b",ue,Object(l["toDisplayString"])(r.amountFormatter(t.rewardAmount)),1),Object(l["createElementVNode"])("span",he,Object(l["toDisplayString"])(e.language.order_unclaimed),1)]))]))],10,re)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ge,Ne))])}),128))])])],64)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ve,[Object(l["createElementVNode"])("div",ke,[fe,Object(l["createElementVNode"])("p",ve,Object(l["toDisplayString"])(e.language.no_data),1)])]))])])])}c("14d9");var we=c("5710"),Be=c("dc3a"),xe=c("3228"),Se=c("5502"),De=c("325c"),Ae=c("ae84"),Ce=c.n(Ae);const Le=e=>(Object(l["pushScopeId"])("data-v-30aebc6f"),e=e(),Object(l["popScopeId"])(),e),Ie={class:"lottery-reward flex"},Me={class:"lottery relative"},Fe=Le(()=>Object(l["createElementVNode"])("img",{class:"bg-1",src:Ce.a,alt:""},null,-1)),Re={class:"content text absolute"},ze={class:"no-row flex jc-between ai-center"},Te={class:"fs-25"},Ge=Le(()=>Object(l["createElementVNode"])("img",{class:"icon",src:o.a,alt:""},null,-1)),Ye=["onClick"],Ze={class:"fs-16"},Je={class:"pool"},Ue={class:"fs-25"},We={class:"reward-list flex1 flex"},Qe={class:"tt flex jc-between ai-center"},Xe={class:"flex ai-center"},_e=["src"],He={class:"fs-20"},Ke={class:"no bg-radius text ta-center"},Pe={class:"flex jc-around fs-18"},qe={class:"reward flex jc-center ai-center"},$e=["src"],et=Le(()=>Object(l["createElementVNode"])("br",null,null,-1)),tt={class:"fs-20"};function ct(e,t,c,a,n,r){var o;return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ie,[Object(l["createElementVNode"])("div",Me,[Fe,Object(l["createElementVNode"])("div",Re,[Object(l["createElementVNode"])("div",{class:"epoch p-25",onClick:t[0]||(t[0]=e=>n.showList=!n.showList)},[Object(l["createElementVNode"])("div",ze,[Object(l["createElementVNode"])("b",Te,"NO. "+Object(l["toDisplayString"])(n.currentLottery.epoch||"——"),1),Ge]),Object(l["createElementVNode"])("p",null,Object(l["toDisplayString"])(r.dateFormatter(n.currentLottery.startAt)),1),Object(l["createElementVNode"])("ul",{class:Object(l["normalizeClass"])(["select-list absolute",{active:n.showList}])},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(n.epochRounds,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{class:Object(l["normalizeClass"])(["flex jc-between p-25",{active:n.currentLottery.epoch===e.epoch}]),onClick:t=>r.onSelect(e),key:e.epoch},[Object(l["createElementVNode"])("b",Ze,"NO. "+Object(l["toDisplayString"])(e.epoch),1),Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(r.dateFormatter(e.startAt)),1)],10,Ye))),128))],2)]),Object(l["createElementVNode"])("div",Je,[Object(l["createElementVNode"])("p",null,Object(l["toDisplayString"])(e.language.tt_4_3)+" (DFT)",1),Object(l["createElementVNode"])("b",Ue,Object(l["toDisplayString"])((null===(o=n.currentLottery)||void 0===o?void 0:o.rewardAmount)||"——"),1)])])]),Object(l["createElementVNode"])("ul",We,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(n.tips,(t,c)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{class:Object(l["normalizeClass"])(["item","reward-"+(t.level+1)]),key:c},[Object(l["createElementVNode"])("div",Qe,[Object(l["createElementVNode"])("div",Xe,[Object(l["createElementVNode"])("img",{class:"icon-m",src:n.prizeMap[t.level],alt:""},null,8,_e),Object(l["createElementVNode"])("b",He,Object(l["toDisplayString"])(r.levelFormatter(t.level)),1)]),Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(e.language.label_1_2)+":"+Object(l["toDisplayString"])(t.num),1)]),Object(l["createElementVNode"])("div",Ke,[Object(l["createElementVNode"])("p",null,Object(l["toDisplayString"])(e.language.label_3_1),1),Object(l["createElementVNode"])("div",Pe,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(t.level+1,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("b",{key:t.level+"_"+e},Object(l["toDisplayString"])(r.epochFormatter(t.nftIds[e-1])),1))),128))])]),Object(l["createElementVNode"])("div",qe,[Object(l["createElementVNode"])("img",{src:n.coinMap.DFT,alt:"DFT",class:"icon-m d-b"},null,8,$e),Object(l["createElementVNode"])("p",null,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.language.reward)+"(DFT)",1),et,Object(l["createElementVNode"])("b",tt,Object(l["toDisplayString"])(t.rewardAmount),1)])])],2))),128))])])}var lt=c("9895"),at=c("78ad"),nt={name:"lotteryReward",computed:{...Object(Se["d"])("nft",["market"]),...Object(Se["c"])(["language"])},data(){return{coinMap:lt["d"],prizeMap:lt["j"],showList:!1,epochRounds:[],currentLottery:{},tips:[{level:0,num:"—",rewardAmount:"——",nftIds:[]},{level:1,num:"—",rewardAmount:"——",nftIds:[]},{level:2,num:"—",rewardAmount:"——",nftIds:[]}],loading:!1}},methods:{...Object(Se["b"])("nft",["setMarket"]),epochFormatter(e){return e?"#"+e:"——"},dateFormatter(e){return e?Object(at["f"])(e).format("yyyy-MM-dd"):"???-??-??"},getRoundList(){let e="query{\n        rounds(first: 20, orderBy: startBlock, orderDirection:desc) {\n          startAt\n          endAt\n          epoch\n          endBlock\n          rewardAmount\n          totalPoints\n        }\n      }";Object(xe["b"])(e).then(({rounds:e})=>{this.setMarket(e[0]),e.splice(0,1),this.currentLottery=e[0],this.epochRounds=e,this.getRewardList(e[0].epoch)})},getRewardList(e){let t=`query{\n          winNumbers(where: {round: "${e}"}) {\n            id\n            nftIds\n            rewardAmount\n            level\n          }\n        }`;Object(xe["b"])(t).then(({winNumbers:e})=>{this.tips=e.map(e=>{let{rewardAmount:t,level:c}=e,l=c+1;return t=new De["b"](t).div(l).myFixed(),{...e,rewardAmount:t,num:l}})})},levelFormatter(e){let t=["prize_1","prize_2","prize_3","prize_4","prize_5","prize_6"];return this.language[t[e]]},onSelect(e){this.currentLottery=e,this.getRewardList(e.epoch)}},beforeMount(){this.getRoundList()}},rt=(c("7043"),c("d959")),ot=c.n(rt);const st=ot()(nt,[["render",ct],["__scopeId","data-v-30aebc6f"]]);var it=st,dt={name:"nftLottery",components:{LotteryReward:it,MPopper:Be["a"],MButton:we["a"]},data(){return{showQuery:!1,showSelection:!1,selectedIds:[],isApproved:!1,gameCards:[],prizeMap:lt["j"],coinMap:lt["d"],showList:!1,betRecords:[],currentLottery:{records:[]},timer:null,count:0,authLoading:!1,bagLoading:!1,betLoading:!1,recordLoading:!1,myCardsList:[]}},computed:{...Object(Se["d"])("app",["address"]),...Object(Se["d"])("option",["currentBlock"]),...Object(Se["d"])("nft",["myCards","market"]),...Object(Se["c"])(["language"]),currentRecords(){return this.currentLottery.records},countDisplay(){return De["g"].format(this.count)}},watch:{address(){this.checkIsApproved(),this.getBetRecords()},market(){this.getBetRecords(),this.startClock()},currentBlock(){this.startClock()}},methods:{...Object(Se["b"])("nft",["deleteCard"]),amountFormatter(e){return new De["b"](e).myFixed()},dateFormatter(e){return e?Object(at["f"])(e).format("yyyy-MM-dd"):"???-??-??"},startClock(){let{market:e,currentBlock:t}=this;this.count=De["g"].calClockCount(t,e.endBlock),clearInterval(this.timer),this.timer=setInterval(()=>this.count--,1e3)},getBetRecords(){let{epoch:e}=this.market;if(!this.address||!e)return;if(this.recordLoading)return;let t=`query{\n        bets(first: 200, orderBy:block, orderDirection:desc, where: {user: "${this.address}"}) {\n          id\n          rewardLevel\n          rewardAmount\n          startPoint\n          endPoint\n          claimed\n          nft {\n            tokenId\n            grade\n            quality\n            resUrl\n          }\n          round {\n            id\n            epoch\n            endBlock\n            startAt\n            endAt\n          }\n        }\n      }`;this.recordLoading=!0,Object(xe["b"])(t).then(({bets:t})=>{let c=[],l=[],a={};t.map(t=>{let{round:n,nft:r}=t;n.epoch===e?c.push(r):(delete t["round"],n.epoch!==a.epoch?(a={},Object.assign(a,n,{records:[t]}),l.push(a)):a.records.push(t))}),this.recordLoading=!1,this.gameCards=c.reverse(),this.currentLottery=l[0]||{records:[]},this.betRecords=l}).catch(()=>{this.recordLoading=!1})},checkIsApproved(){this.address&&this.$api.checkIsApproved().then(e=>this.isApproved=e)},setApproved(){this.authLoading=!0,this.$api.setApprovalForAll().then(()=>{this.authLoading=!1,this.isApproved=!0}).catch(()=>{this.authLoading=!1})},getCardList(){this.$api.gqlBagNftListAdd(this.address).then(e=>{this.myCardsList=e.defxTokens}).catch(()=>{})},selectCard(e){let t=this.selectedIds.indexOf(e),c=this.selectedIds.length+this.gameCards.length;-1===t?c<5&&this.selectedIds.push(e):this.selectedIds.splice(t,1)},betNFT(){let e=this.selectedIds;e.length&&(this.betLoading=!0,this.$api.betNFT(e).then(()=>{this.showSelection=!1,this.betLoading=!1,this.addCardsToGame(),this.deleteCard(e)}).catch(()=>{this.betLoading=!1}))},addCardsToGame(){let e=this.selectedIds.map(e=>this.myCards.find(t=>t.id===e));this.gameCards=this.gameCards.concat(e)},onSelect(e){this.currentLottery=e},recordClaim(e,t){if(t.claimed||t.rewardLevel<0)return;let{nft:c}=t;this.$api.claimNFT(e.epoch,c.tokenId).then(()=>{t.claimed=!0}).catch(()=>{})}},mounted(){this.checkIsApproved(),this.getBetRecords()},beforeUnmount(){clearInterval(this.timer),this.timer=null}};c("9991");const bt=ot()(dt,[["render",ye],["__scopeId","data-v-99d8b150"]]);t["default"]=bt}}]);
//# sourceMappingURL=chunk-47d991f9.4f5886a4.js.map